<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Anonymous Confession</title>
</head>
<body>

<h2>Anonymous Confession</h2>

<textarea id="confessionText" placeholder="Write your confession..." rows="6" cols="40"></textarea>
<br><br>
<button onclick="submitConfession()">Submit</button>

<p id="status"></p>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js"></script>

<script>
  // Firebase config (YOUR PROJECT)
  const firebaseConfig = {
    apiKey: "AIzaSyBG5Z71bIS4HA-0y5477uDKCxHgDkWaO_I",
    authDomain: "jntuhconfess2k25.firebaseapp.com",
    projectId: "jntuhconfess2k25",
    storageBucket: "jntuhconfess2k25.firebasestorage.app",
    messagingSenderId: "1003331591998",
    appId: "1:1003331591998:web:5c0ad9cc6983896953166f"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // üî¥ THIS WAS MISSING BEFORE
  const db = firebase.firestore();

  function submitConfession() {
    const text = document.getElementById("confessionText").value.trim();
    const status = document.getElementById("status");

    if (!text) {
      status.innerText = "‚ùå Confession cannot be empty";
      return;
    }

    db.collection("confessions").add({
      text: text,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => {
      status.innerText = "‚úÖ Confession submitted successfully!";
      document.getElementById("confessionText").value = "";
    })
    .catch((error) => {
      status.innerText = "‚ùå Error submitting confession!";
      console.error(error);
    });
  }
</script>

</body>
</html>
